# Vibe Agent v1.1 - Remaining Features Task List

**Goal:** Complete the missing 10-15% to reach 95-100% of original vision

**Current Status:** v1.0 @ 85-90% complete
**Target:** v1.1 @ 95-100% complete

---

## üî¥ HIGH PRIORITY - Phase A (Critical for v1.1)

### A1: CFG (Control Flow Graph) Builder
- [x] Create `backend/src/graphs/cfg_builder.py`
- [x] Control flow analysis for functions
- [x] Branch detection (if/else/switch)
- [x] Loop detection (for/while)
- [x] Exception flow tracking
- [x] Basic block construction
- [x] Cyclomatic complexity calculation
- [ ] Neo4j CFG nodes and edges
- [ ] Integration with ASG

### A2: Monaco Code Viewer Component ‚úÖ
- [x] Create `frontend/src/components/CodeViewer.tsx`
- [x] Monaco Editor integration
- [x] Syntax highlighting (Python/TS/JS)
- [x] Line numbers and minimap
- [x] Read-only mode
- [x] Jump to line functionality
- [x] Theme integration (dark mode)
- [x] Line highlighting support
- [ ] Install monaco-editor package
- [ ] Performance optimization for large files

### A3: Diff Viewer Component ‚úÖ
- [x] Create `frontend/src/components/DiffViewer.tsx`
- [x] Side-by-side diff view
- [x] Unified diff view
- [x] Syntax highlighting for diffs
- [x] Line-by-line comparison
- [x] Statistics display (additions/deletions)
- [ ] Accept/reject patch UI
- [ ] Integration with patch API
- [ ] Install diff package

### A4: Patch Validation Pipeline ‚úÖ
- [x] Create `backend/src/patching/validator.py`
- [x] Syntax checking (Python/TS/JS)
- [x] Type checker integration (mypy for Python)
- [x] Type checker integration (tsc for TypeScript)
- [x] Linter integration (flake8/eslint)
- [x] Validation reporting
- [ ] Docker sandbox implementation
- [ ] Pre-patch test execution
- [ ] Rollback mechanism

### A5: WebSocket for Real-time Updates ‚úÖ
- [x] Create WebSocket handler
- [x] Connection manager
- [x] Real-time indexing progress
- [x] Live chat streaming
- [x] Agent execution updates
- [ ] Frontend WebSocket client
- [ ] Reconnection handling

---

## üü° MEDIUM PRIORITY - Phase B (Enhanced Features)

### B1: Symbol Lineage Tracing ‚úÖ
- [x] Create `backend/src/intelligence/symbol_tracer.py`
- [x] Track symbol across files
- [x] Find definitions, imports, usages
- [x] Lineage chain construction
- [x] Rename candidate detection
- [x] Impact analysis
- [ ] Lineage visualization API endpoint
- [ ] Frontend lineage viewer

### B2: Advanced Error-Path Retrieval ‚úÖ
- [x] Create `backend/src/retrieval/error_path_retrieval.py`
- [x] Weighted graph traversal algorithm
- [x] Backward BFS through call graph
- [x] Path ranking by likelihood
- [x] Error propagation analysis
- [ ] Integration with bug localization agent

### B3: D3 Graph Visualizations ‚úÖ
- [x] Create `frontend/src/components/GraphVisualizer.tsx`
- [x] Force-directed graph layout
- [x] Interactive zoom/pan
- [x] Node highlighting on hover
- [x] Drag nodes to rearrange
- [x] Color-coded node types
- [x] Tooltips and labels
- [x] Call graph visualization support
- [ ] Dependency graph visualization integration

### B4: Multi-file Patch Planning ‚úÖ
- [x] Create `backend/src/patching/multi_file_planner.py`
- [x] Atomic multi-file changes
- [x] Dependency resolution (topological sort)
- [x] Conflict detection
- [x] Change impact prediction
- [x] Risk scoring
- [x] Patch validation
- [x] Preview generation
- [ ] Integration with patch agent

### B5: Complete API Endpoints ‚úÖ
- [x] Create `backend/src/app/routes/v1_1_routes.py`
- [x] `/patch/apply` endpoint
- [x] `/patch/validate` endpoint
- [x] `/symbols/lineage/{symbol}` endpoint
- [x] `/symbols/rename-candidates` endpoint
- [x] `/cfg/function/{name}` endpoint
- [x] `/search/error-path` endpoint
- [x] `/memory/history` dedicated endpoint
- [x] Integration with main app (WebSocket + v1.1 routes)

---

## üü¢ LOW PRIORITY - Phase C (Nice-to-Have)

### C1: Offline Mode
- [ ] Local-only operation flag
- [ ] Graceful LLM fallback
- [ ] Cached response system
- [ ] Offline indicators in UI

### C2: LLM Call Caching
- [ ] Response cache database
- [ ] Query deduplication
- [ ] Cache invalidation strategy
- [ ] Cost tracking and analytics

### C3: Token Usage Meter
- [ ] Create `frontend/src/components/TokenMeter.tsx`
- [ ] Real-time token counting
- [ ] Cost estimation (Gemini pricing)
- [ ] Usage history chart
- [ ] Budget alerts

### C4: Retry-Tree Patching
- [ ] Multiple patch generation attempts
- [ ] Backtracking on failures
- [ ] Alternative solution ranking
- [ ] Best-path selection

### C5: Additional Language Support
- [ ] Java parser (Tree-sitter)
- [ ] Go parser
- [ ] Rust parser
- [ ] C/C++ parser
- [ ] Language-specific analysis rules

### C6: Advanced Testing
- [ ] Agent orchestration tests
- [ ] End-to-end tests (Playwright)
- [ ] Frontend component tests (Jest/RTL)
- [ ] Performance benchmarks
- [ ] Load testing

### C7: Production Infrastructure
- [ ] Celery workers setup
- [ ] Redis queue configuration
- [ ] Docker Compose production
- [ ] Kubernetes manifests
- [ ] CI/CD pipeline

---

## üìä ESTIMATED COMPLETION

**Phase A (High Priority):** ~5-7 days
- CFG Builder: 1-2 days
- Monaco Viewer: 1 day
- Diff Viewer: 1 day
- Patch Validation: 2-3 days
- WebSocket: 1 day

**Phase B (Medium Priority):** ~4-5 days
- Symbol Lineage: 1-2 days
- Advanced Error-Path: 1 day
- D3 Visualizations: 2 days
- Multi-file Patching: 1 day
- API Endpoints: 1 day

**Phase C (Low Priority):** ~3-4 days
- Can be done incrementally

**Total for 95%+:** ~10-15 days additional work

---

## üéØ v1.1 MILESTONES

### Milestone 1: Visual Components (3-4 days)
- Monaco Code Viewer
- Diff Viewer Component
- Basic D3 Graph Visualization

### Milestone 2: Advanced Analysis (3-4 days)
- CFG Builder
- Symbol Lineage Tracing
- Advanced Error-Path Retrieval

### Milestone 3: Patch System (2-3 days)
- Patch Validation Pipeline
- Multi-file Patch Planning
- WebSocket Streaming

### Milestone 4: Polish & Testing (2-3 days)
- Complete API endpoints
- Additional tests
- Performance optimization
- Documentation updates

---

## üìù IMPLEMENTATION ORDER

**Week 1: Critical UI & Core Features**
1. Monaco Code Viewer ‚úÖ Start here
2. Diff Viewer Component
3. CFG Builder
4. WebSocket implementation

**Week 2: Advanced Features**
5. Patch Validation Pipeline
6. Symbol Lineage Tracing
7. D3 Graph Visualizations
8. Advanced Error-Path Retrieval

**Week 3: Integration & Polish**
9. Multi-file Patch Planning
10. Complete remaining API endpoints
11. Testing improvements
12. Documentation updates

---

## üöÄ READY TO START

**Starting with:** Monaco Code Viewer (most impactful for users)

This will provide immediate visual value and enable:
- Better code inspection
- Improved search result viewing
- Foundation for diff viewing
